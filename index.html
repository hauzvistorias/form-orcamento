<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Orçamento de Vistoria Imobiliária</title>
<style>
    body {
        font-family: Arial, sans-serif;
        max-width: 700px;
        margin: auto;
    }
    h1 {
        text-align: center;
    }
    .subtitulo {
        text-align: center;
        font-size: 0.9em;
        font-style: italic;
        margin-top: -10px;
        margin-bottom: 20px;
    }
    label {
        display: block;
        margin-top: 12px;
    }
    input, select {
        width: 100%;
        padding: 6px;
        margin-top: 4px;
    }
    .checkbox-group label {
        display: block;
        margin-top: 6px;
    }
    #resultado {
        margin-top: 20px;
        font-size: 1.2em;
        font-weight: bold;
    }
    .aviso-final {
        margin: 15px 0;
        color: green;
        font-weight: bold;
    }
    button {
        width: 100%;
        padding: 10px;
        font-size: 1em;
        cursor: pointer;
    }
</style>
</head>
<body>

<h1>ORÇAMENTO DE VISTORIA IMOBILIÁRIA</h1>
<div class="subtitulo">Valores válidos a partir de 01/02/2026</div>

<label>Cidade</label>
<select id="cidade">
    <option value="itu">Itu</option>
    <option value="salto">Salto</option>
    <option value="indaiatuba">Indaiatuba</option>
    <option value="sorocaba">Sorocaba</option>
    <option value="outra">Outra cidade</option>
</select>

<label>Tipo de imóvel</label>
<select id="tipoImovel">
    <option value="apartamento">Apartamento</option>
    <option value="casa">Casa térrea</option>
    <option value="sobrado">Sobrado</option>
    <option value="kitinete">Kitinete / Sala comercial pequena</option>
    <option value="galpao">Galpão</option>
</select>

<label>Área construída (m²)</label>
<input type="number" id="areaConstruida" min="1">

<label>Área do terreno (m²)</label>
<input type="number" id="areaTerreno" min="0">

<div class="checkbox-group">
    <label><strong>Mobiliário</strong></label>
    <label><input type="checkbox" value="1" checked> 1 (sem móveis)</label>
    <label><input type="checkbox" value="2"> 2 (cozinha com armários)</label>
    <label><input type="checkbox" value="3"> 3 (banheiros com gabinetes e boxes)</label>
    <label><input type="checkbox" value="4"> 4 (quartos com armários)</label>
    <label><input type="checkbox" value="5"> 5 (outros móveis fixos planejados)</label>
    <label><input type="checkbox" value="6"> 6 (imóvel totalmente mobiliado – orçamento sob consulta)</label>
</div>

<div id="resultado">Valor estimado: R$ 0</div>

<div class="aviso-final">
Se o orçamento ultrapassar 10% do valor líquido da locação entre em contato, vamos conversar!
</div>

<button onclick="enviarWhatsApp()">Enviar pelo WhatsApp</button>

<script>
function arredondarPara5(valor) {
    return Math.ceil(valor / 5) * 5;
}

function calcularValor() {

    let cidade = document.getElementById("cidade").value;
    let tipo = document.getElementById("tipoImovel").value;
    let areaConstruidaReal = Number(document.getElementById("areaConstruida").value);
    let areaTerreno = Number(document.getElementById("areaTerreno").value);

    if (!areaConstruidaReal) return 0;

    // --- FATOR CIDADE ---
    let valorCidade = 40;
    let avisoContato = false;

    if (cidade === "salto") valorCidade = 70;
    else if (cidade === "indaiatuba") valorCidade = 140;
    else if (cidade === "sorocaba") valorCidade = 150;
    else if (cidade === "outra") {
        valorCidade = 40;
        avisoContato = true;
    }

    // --- M2 BASE ---
    let m2base = 1.40;
    if (areaConstruidaReal >= 301 && areaConstruidaReal <= 500) m2base = 1.30;
    if (areaConstruidaReal >= 501) m2base = 1.20;

    // --- MOBILIÁRIO ---
    let checks = document.querySelectorAll(".checkbox-group input:checked");
    let mobiliario6 = false;
    let acrescimos = 0;

    checks.forEach(c => {
        if (["2","3","4","5"].includes(c.value)) {
            acrescimos += 0.125;
        }
        if (c.value === "6") mobiliario6 = true;
    });

    if (mobiliario6) {
        avisoContato = true;
    } else {
        m2base = m2base * (1 + acrescimos);
    }

    /*
      REGRA IMPORTANTE:
      - O mínimo de 70 m² é aplicado SOMENTE no cálculo da parte construída
      - A fração do terreno usa SEMPRE a área construída real informada
    */
    let areaConstruidaCalculo = Math.max(areaConstruidaReal, 70);

    let valor = valorCidade + (m2base * areaConstruidaCalculo);

    if (tipo === "casa") {
        valor += (areaTerreno - areaConstruidaReal) * (m2base * 0.3);
    }

    if (tipo === "sobrado") {
        valor += (areaTerreno - (0.6 * areaConstruidaReal)) * (m2base * 0.3);
    }

    if (tipo === "kitinete") {
        valor -= 30;
    }

    if (tipo === "galpao") {
        valor = valorCidade + (m2base * areaConstruidaCalculo * 0.8)
              + (areaTerreno - areaConstruidaReal) * (m2base * 0.3);
    }

    valor = arredondarPara5(Math.ceil(valor));

    if (avisoContato) {
        alert("Para esta configuração, entre em contato para orçamento detalhado.");
    }

    return valor;
}

function enviarWhatsApp() {
    let valor = calcularValor();
    document.getElementById("resultado").innerText = "Valor estimado: R$ " + valor;

    let msg = encodeURIComponent("Orçamento estimado de vistoria: R$ " + valor);
    window.open("https://wa.me/55SEUNUMEROAQUI?text=" + msg, "_blank");
}
</script>

</body>
</html>
